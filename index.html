<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SVG Path Points</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2451471082233132"
     crossorigin="anonymous"></script>
  <style>
    /* Base styling & Material Design look */
    body {
      background: linear-gradient(135deg, #000000, #1a1a1a);
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' id='bp'%3E%3Cdefs%3E%3CradialGradient id='grad'%3E%3Cstop offset='0%25' stop-color='%231a1a2b' /%3E%3Cstop offset='100%25' stop-color='%23002' /%3E%3C/radialGradient%3E%3Cpattern id='grid' width='100' height='100' patternUnits='userSpaceOnUse' patternTransform='scale(0.5) skewY(10) skewX(-30)'%3E%3Cpath d='M10 0v100m10 0v-100m10 0v100m10 0v-100m10 0v100m10 0v-100m10 0v100m10 0v-100m10 0v100M0 10h100m0 10h-100m0 10h100m0 10h-100m0 10h100m0 10h-100m0 10h100m0 10h-100m0 10h100' fill='none' stroke='rgba(255,255,255,0.1)' /%3E%3Cpath d='M0 0l0 100 100 0 0-100z' fill='none' stroke='rgba(255,255,255,0.2)' /%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23grad)' /%3E%3Crect width='100%25' height='100%25' fill='url(%23grid)' /%3E%3C/svg%3E");
      font-family: "Roboto", sans-serif;
      margin: 0;
      padding: 16px;
      color: #fff;
    }
    header {
      text-align: center;
      margin-bottom: 24px;
    }
    header h1 {
      margin: 0;
      font-size: 2em;
      font-weight: 400;
      color: #fff;
    }
    .cards-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 16px;
    }
    .card {
      background: #001;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      padding: 16px;
      width: 320px;
    }
    .card svg {
      width: 100%;
      height: 300px;
      border: none;
      margin-bottom: 8px;
			background: #889;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
      resize: vertical;
      font-family: "Roboto", sans-serif;
      font-size: 0.9em;
    }
    label {
      display: block;
      margin-bottom: 4px;
      font-size: 1em;
      font-weight: 500;
      color: #1976d2;
    }
    /* Copy button styling */
    .copy-btn {
      background-color: #1976d2;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 0.9em;
      margin-top: 8px;
    }
    .copy-btn:hover {
      background-color: #1565c0;
    }
    .slider-container {
      text-align: center;
      margin-top: 24px;
    }
    .slider {
      -webkit-appearance: none;
      width: 80%;
      max-width: 500px;
      height: 4px;
      background: #ddd;
      outline: none;
      border-radius: 2px;
      margin: 16px auto;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: #1976d2;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #1976d2;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <header>
    <h1>SVG Path Points</h1>
  </header>
  <div class="cards-container">
    <div class="card">
      <svg id="inputSVG" preserveAspectRatio="xMidYMid meet">
        <path id="inputPath" fill="none" stroke="#000" stroke-width="3" d="" />
      </svg>
      <label id="inputLabel" for="input">Input Path:</label>
      <textarea id="input">M 137 10 L 132.3 21.6 L 127.5 33.1 L 122.6 44.6 L 117.5 56 L 112.3 67.3 L 106.9 78.6 L 101.2 89.7 L 95.4 100.7 L 89.2 111.6 L 82.7 122.3 L 75.8 132.7 L 68.4 142.7 L 60.4 152.3 L 51.5 161.1 L 41.6 168.6 L 30.3 173.8 L 18.4 172.5 L 12.1 162.2 L 12.2 149.7 L 15.2 137.6 L 20.7 126.5 L 27.7 116.1 L 36.1 106.9 L 46 99.4 L 57.5 94.4 L 69.8 92.8 L 81.7 95.9 L 88.8 105.8 L 90.1 118.2 L 88.6 130.5 L 85.5 142.7 L 81.6 154.5 L 79 166.6 L 85.3 176 L 97.4 173.7 L 108.7 168.4 L 119.4 162 L 129.9 155.2 L 140 147.9 L 145.5 136.7 L 151.6 125.8 L 158.5 115.4 L 166.5 105.8 L 175.9 97.6 L 187.1 92.3 L 199.5 91.7 L 211.3 95.7 L 220.1 104.2 L 221.9 116.4 L 219 128.5 L 214 139.9 L 206.1 149.6 L 197.5 158.6 L 188.1 166.9 L 177.6 173.5 L 165.6 176.8 L 153.6 174 L 144.3 165.8 L 147.7 161.1 L 160.1 160.6 L 172.5 159.2 L 184.9 157.2 L 197.1 154.7 L 209.3 151.8 L 221.3 148.7 L 233.3 145.2 L 245.3 141.5 L 259 141 Q 272 171 284 167 Q 327 165 353 96 Q 310 82 279 111 Q 260 132 272 157 Q 281 177 323 169 Q 303 209 277 254 Q 262 276 256 249 Q 255 208 284 189 Q 346 156 390 140</textarea>
    </div>
    <div class="card">
      <svg id="outputSVG" preserveAspectRatio="xMidYMid meet">
        <path id="outputPath" fill="none" stroke="#000" stroke-width="3" d="" />
      </svg>
      <label id="outputLabel" for="output">Output Path <span>(evenly spaced):</span></label>
      <textarea id="output" readonly></textarea>
      <button id="copyButton" class="copy-btn">Copy</button>
    </div>
  </div>
  <div class="slider-container">
    <input type="range" min="1" max="1000" value="55" class="slider" id="myRange">
    <p>Path Points: <span id="points"></span></p>
  </div>
  <script>
    let steps = 55;
    const slider = document.getElementById("myRange");
    const pointsDisplay = document.getElementById("points");

    // Computes evenly spaced points along a given SVG path.
    const getPointsFromPath = (numPoints = 111, mult = 1, mypath) => {
      let pathLength = mypath.getTotalLength();
      let d = 'M';
      for (let i = 0; i <= numPoints; i++) {
        let p = mypath.getPointAtLength(i * pathLength / numPoints);
        d += `${Math.round(((p.x * mult) + Number.EPSILON) * 1000) / 1000} ${Math.round(((p.y * mult) + Number.EPSILON) * 1000) / 1000}, `;
      }
      return d.slice(0, -2);
    };

    // Updates the SVG viewBox based on the path's bounding box plus a margin.
    function updateSVGViewBox(svgId, pathId) {
      const svgElem = document.getElementById(svgId);
      const pathElem = document.getElementById(pathId);
      if (pathElem && typeof pathElem.getBBox === "function") {
        let bbox = pathElem.getBBox();
        let margin = 10;
        let vb = `${bbox.x - margin} ${bbox.y - margin} ${bbox.width + 2 * margin} ${bbox.height + 2 * margin}`;
        svgElem.setAttribute("viewBox", vb);
      }
    }

    // Updates both the input and output paths and rescales their SVG containers.
    const updateShape = () => {
      const inputValue = document.getElementById("input").value;
      // Create a temporary path element to compute measurements.
      const dummyPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
      dummyPath.setAttribute('d', inputValue);
      
      document.getElementById("inputPath").setAttribute("d", inputValue);
      updateSVGViewBox("inputSVG", "inputPath");
      
      const outputD = getPointsFromPath(steps, 1, dummyPath);
      document.getElementById("output").value = outputD;
      document.getElementById("outputPath").setAttribute("d", outputD);
      updateSVGViewBox("outputSVG", "outputPath");
    };

    document.getElementById("input").addEventListener('input', updateShape);

    slider.addEventListener('input', function() {
      steps = parseInt(this.value, 10);
      pointsDisplay.textContent = (steps + 1);
      updateShape();
    });

    // Copy button functionality using the Clipboard API.
    document.getElementById("copyButton").addEventListener("click", function(){
      const outputText = document.getElementById("output").value;
      navigator.clipboard.writeText(outputText)
        .then(() => alert("Output copied to clipboard!"))
        .catch(err => alert("Failed to copy: " + err));
    });

    // Initial update.
    updateShape();
    pointsDisplay.textContent = (steps + 1);
  </script>
  <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
        kofiWidgetOverlay.draw('leimapapa', {
		'type': 'floating-chat',
		'floating-chat.donateButton.text': 'Support me',
		'floating-chat.donateButton.background-color': 'rgba(255, 255, 255, 0.1)',
		'floating-chat.donateButton.text-color': '#fff'
	});
	</script>
    <script type="module">
	  import { createNavbar } from 'https://leimolabs.com/navbar.js';
	
	  document.addEventListener('DOMContentLoaded', () => {
	    createNavbar({ opacity: '0.8' });
	  });
  </script>
</body>
</html>
